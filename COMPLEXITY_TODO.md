# Complexity Improvements TODO

Generated on: 2025-03-10T15:26:25.600Z

## Summary
- Files with complexity issues: 119
- Total complexity issues: 165
- Cyclomatic complexity issues: 10
- Cognitive complexity issues: 119

## Complexity Thresholds
- Cyclomatic complexity threshold: 10
- Cognitive complexity threshold: 10

## Issues by File

### config/vitest.config.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/config/config.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/controllers/actions.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/controllers/content.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/controllers/embeddings.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/controllers/groq.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/controllers/mutate.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/controllers/projects.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/controllers/release-actions.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/controllers/releases.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/controllers/schema.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/controllers/search.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/controllers/tools-new.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/controllers/tools.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/index.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/scripts/test-create-release.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/src/config/config.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/src/controllers/actions.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/src/controllers/embeddings.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/src/controllers/groq.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/src/controllers/mutate.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/src/controllers/release-actions.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/src/controllers/releases.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/src/controllers/schema.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/src/controllers/tools.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/src/index.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/src/tools/document-tools.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/src/tools/embeddings-tools.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/src/tools/index.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/src/tools/query-tools.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/src/tools/release-tools.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/src/tools/schema-tools.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/src/tools/system-tools.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/src/types/index.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/src/types/tools.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/src/utils/logger.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/src/utils/portableText.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/src/utils/sanityClient.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/tools/actionsTools.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/tools/contextTools.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/tools/document-tools.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/tools/embeddings-tools.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/tools/embeddingsTools.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/tools/groqTools.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/tools/index.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/tools/mutateTools.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/tools/projectsTools.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/tools/query-tools.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/tools/release-tools.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/tools/releasesTools.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/tools/schema-tools.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/tools/schemaTools.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/tools/system-tools.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/types/common.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/types/embeddings.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/types/index.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/types/sanity.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/types/toolProvider.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/types/tools.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/utils/documentHelpers.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/utils/logger.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/utils/mcpTransport.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/utils/mdToPortableText.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/utils/portableText.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/utils/references.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/utils/sanityClient.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/utils/zodHelpers.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### dist/validators/mutationValidator.d.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### src/config/config.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### src/controllers/actions.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### src/controllers/embeddings.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.
- [ ] **Cyclomatic Complexity**: Line 67 - Async function 'semanticSearch' has a complexity of 17. Maximum allowed is 10.

### src/controllers/groq.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.
- [ ] **Cyclomatic Complexity**: Line 26 - Async function 'searchContent' has a complexity of 25. Maximum allowed is 10.
- [ ] **Cyclomatic Complexity**: Line 125 - Async function 'query' has a complexity of 20. Maximum allowed is 10.

### src/controllers/mutate.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.
- [ ] **Cyclomatic Complexity**: Line 319 - Async arrow function has a complexity of 12. Maximum allowed is 10.

### src/controllers/projects.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### src/controllers/releases.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### src/controllers/schema.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.
- [ ] **Cyclomatic Complexity**: Line 101 - Function 'findReferences' has a complexity of 23. Maximum allowed is 10.

### src/index.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.
- [ ] **Cyclomatic Complexity**: Line 42 - Async arrow function has a complexity of 12. Maximum allowed is 10.

### src/tools/actionsTools.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### src/tools/contextTools.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### src/tools/embeddingsTools.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### src/tools/groqTools.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### src/tools/index.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### src/tools/mutateTools.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### src/tools/projectsTools.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### src/tools/releasesTools.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### src/tools/schemaTools.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### src/types/index.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### src/types/sanity.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### src/types/sharedTypes.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### src/types/toolProvider.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### src/types/tools.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### src/utils/defaultValues.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### src/utils/documentHelpers.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.
- [ ] **Cyclomatic Complexity**: Line 33 - Function 'applyPatchOperations' has a complexity of 25. Maximum allowed is 10.

### src/utils/logger.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### src/utils/mcpTransport.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### src/utils/parameterValidation.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### src/utils/portableText.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.
- [ ] **Cyclomatic Complexity**: Line 41 - Arrow function has a complexity of 15. Maximum allowed is 10.

### src/utils/sanityClient.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### test/controllers/actions.test.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### test/controllers/embeddings.test.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### test/controllers/groq.test.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### test/controllers/mutate.test.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### test/controllers/releases.test.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### test/controllers/schema.test.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### test/integration/critical/core-document-operations.test.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### test/integration/critical/semantic-search.test.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### test/integration/extended/schema-single-types.test.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### test/integration/standard/array-parameter-deserialization.test.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### test/integration/standard/release-document-workflow.test.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.
- [ ] **Cyclomatic Complexity**: Line 53 - Async arrow function has a complexity of 13. Maximum allowed is 10.

### test/integration/standard/sanity-mcp-server.test.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### test/setup.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### test/unit/quality-validation.test.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### test/unit/tools/index.test.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### test/unit/types/mutateTools.test.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### test/unit/types/typeConsistency.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.
- [ ] **Cyclomatic Complexity**: Line 71 - Function 'mockZodValue' has a complexity of 18. Maximum allowed is 10.

### test/unit/utils/defaultValues.test.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### test/unit/utils/documentHelpers.test.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### test/unit/utils/parameterValidation.test.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

### test/utils/sanityClient.test.ts

- [ ] **Cognitive Complexity**: Line 1 - Definition for rule 'sonarjs/cognitive-complexity' was not found.

## Strategies for Reducing Complexity

### Reducing Cyclomatic Complexity

1. **Extract Methods/Functions**: Break large functions into smaller, more focused ones
2. **Simplify Conditional Logic**: Use early returns, guard clauses, and reduce nested if statements
3. **Replace Conditionals with Polymorphism**: Use object-oriented patterns
4. **Use Configuration Data**: Replace complex switch/case statements with lookup tables
5. **Extract Complex Validation Logic**: Move validation to separate functions

### Reducing Cognitive Complexity

1. **Reduce Nesting**: Excessive nesting makes code hard to understand
2. **Extract Decision Making**: Move complex boolean logic to named functions
3. **Simplify Loop Logic**: Avoid complex logic inside loops
4. **Avoid Double Negations**: Make conditionals positive and clear
5. **Use Named Constants**: Replace magic numbers and complex expressions
